<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Регистрация нового пользователя</title>
</head>
<body>
<h3>Регистрация личного кабинета</h3>
<form action="/registration" method="post" th:object="${registerForm}">
    <p>
        <label>Имя: </label>
        <input id="firstNameInput" type="text" name="firstName" />
        <span id="firstNameError" style="color: red; display: none"></span>
    </p>
    <p>
        <label>Фамилия: </label>
        <input id="lastNameInput" type="text" name="lastName" />
        <span id="lastNameError" style="color: red; display: none"></span>
    </p>
    <p>
        <label>Логин: </label>
        <input id="loginInput" type="text" name="login" required/>
        <span id="loginError" style="color: red; display: none"></span>
    </p>
    <p>
        <label>Пароль: </label>
        <input id="passwordInput" type="password" name="password" required/>
        <span id="passwordError" style="color: red; display: none"></span>
    </p>
    <p>
        <label>Повторите пароль: </label>
        <input id="repeatPasswordInput" type="password" name="repeatPassword" required/>
        <span id="repeatPasswordError" style="color: red"></span>
    </p>
    <button type="submit">Зарегистрироваться</button>
</form>
<script>
    (function () {

        document.getElementById('firstNameInput').addEventListener('input', function () {
            let input = document.getElementById('firstNameInput');
            let errorInput = document.getElementById('firstNameError');
            if (input.value.length > 5) {
                errorInput.textContent = 'Превышена длина поля (не более 255 символов)';
                errorInput.style.display = 'inline';
            } else {
                errorInput.style.display = 'none';
            }
        });

        document.getElementById('lastNameInput').addEventListener('input', function () {
            let input = document.getElementById('lastNameInput');
            let errorInput = document.getElementById('lastNameError');
            if (input.value.length > 5) {
                errorInput.textContent = 'Превышена длина поля (не более 255 символов)';
                errorInput.style.display = 'inline';
            } else {
                errorInput.style.display = 'none';
            }
        });

        document.getElementById('loginInput').addEventListener('input', function () {
            let input = document.getElementById('loginInput');
            let errorInput = document.getElementById('loginError');
            if (input.value.length > 5) {
                errorInput.textContent = 'Превышена длина поля (не более 255 символов)';
                errorInput.style.display = 'inline';
            } else if (input.value.length < 3) {
                errorInput.textContent = 'Не достаточная длина поля (не менее 3 символов)';
                errorInput.style.display = 'inline';
            } else {
                errorInput.style.display = 'none';
            }
        });

        document.getElementById('passwordInput').addEventListener('input', function () {
            let input = document.getElementById('passwordInput');
            let errorInput = document.getElementById('passwordError');
            if (input.value.length > 255) {
                errorInput.textContent = 'Превышена длина поля (не более 255 символов)';
                errorInput.style.display = 'inline';
            } else if (input.value.length < 5) {
                errorInput.textContent = 'Не достаточная длина поля (не менее 5 символов)';
                errorInput.style.display = 'inline';
            } else {
                errorInput.style.display = 'none';
            }
        });

        document.getElementById('repeatPasswordInput').addEventListener('input', function () {
            let input = document.getElementById('repeatPasswordInput');
            let errorInput = document.getElementById('repeatPasswordError');
            if (input.value.length > 255) {
                errorInput.textContent = 'Превышена длина поля (не более 255 символов)';
                errorInput.style.display = 'inline';
            } else if (input.value.length < 5) {
                errorInput.textContent = 'Не достаточная длина поля (не менее 5 символов)';
                errorInput.style.display = 'inline';
            }  else if (document.getElementById('passwordInput').value !== input.value) {
                errorInput.textContent = 'Пароли не совпадают';
                errorInput.style.display = 'inline';
            } else {
                errorInput.style.display = 'none';
            }
        });
    })();
</script>
</body>
</html>